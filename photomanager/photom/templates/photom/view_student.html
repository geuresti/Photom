{% extends 'photom/base.html' %}

{% load static %}

{% block style %} 
    <link rel="stylesheet" href="{% static 'photom/view_student.css' %}"> 
{% endblock %}

{% block title %} Student View {% endblock %}

{% block content %}
    <a id="back-icon-wrapper" href="{% url 'manage_classes' %}">
        <svg width="50" height="50" viewBox="0 0 276 276" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="138" cy="138" r="131" stroke="black" stroke-width="14"/>
            <path d="M208 145C211.866 145 215 141.866 215 138C215 134.134 211.866 131 208 131L208 145ZM64.0503 133.05C61.3166 135.784 61.3166 140.216 64.0503 142.95L108.598 187.497C111.332 190.231 115.764 190.231 118.497 187.497C121.231 184.764 121.231 180.332 118.497 177.598L78.8995 138L118.497 98.402C121.231 95.6683 121.231 91.2362 118.497 88.5025C115.764 85.7688 111.332 85.7688 108.598 88.5025L64.0503 133.05ZM208 131L69 131L69 145L208 145L208 131Z" fill="black"/>
        </svg>
    </a>
    <div id="student-view-wrapper">
        <div id="student-info">
            <div id="student-id-photo" style="background-image: url(' {% get_media_prefix %}{{ student.student_photo_ID }} ');">

                <a id="student-settings" href="{% url 'delete_student' student.pk %}" onclick="return confirm('Are you want to delete this student?');">
                    <svg id="student-delete-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="22" height="22" viewBox="0 0 64 64">
                        <path d="M 28 7 C 25.243 7 23 9.243 23 12 L 23 15 L 13 15 C 11.896 15 11 15.896 11 17 C 11 18.104 11.896 19 13 19 L 15.109375 19 L 16.792969 49.332031 C 16.970969 52.510031 19.600203 55 22.783203 55 L 41.216797 55 C 44.398797 55 47.029031 52.510031 47.207031 49.332031 L 48.890625 19 L 51 19 C 52.104 19 53 18.104 53 17 C 53 15.896 52.104 15 51 15 L 41 15 L 41 12 C 41 9.243 38.757 7 36 7 L 28 7 z M 28 11 L 36 11 C 36.552 11 37 11.449 37 12 L 37 15 L 27 15 L 27 12 C 27 11.449 27.448 11 28 11 z M 32 23.25 C 32.967 23.25 33.75 24.034 33.75 25 L 33.75 45 C 33.75 45.966 32.967 46.75 32 46.75 C 31.033 46.75 30.25 45.966 30.25 45 L 30.25 25 C 30.25 24.034 31.033 23.25 32 23.25 z M 40.007812 23.25 C 40.972813 23.284 41.728313 24.094547 41.695312 25.060547 L 40.998047 45.146484 C 40.965047 46.092484 40.190953 46.836937 39.251953 46.835938 C 39.230953 46.835938 39.210453 46.833984 39.189453 46.833984 C 38.224453 46.799984 37.468953 45.989438 37.501953 45.023438 L 38.197266 24.9375 C 38.231266 23.9725 39.039813 23.223 40.007812 23.25 z M 23.990234 23.251953 C 24.954234 23.228953 25.766781 23.973453 25.800781 24.939453 L 26.498047 45.025391 C 26.532047 45.991391 25.776547 46.801938 24.810547 46.835938 C 24.790547 46.835937 24.769047 46.835938 24.748047 46.835938 C 23.810047 46.835938 23.033 46.091484 23 45.146484 L 22.302734 25.060547 C 22.268734 24.094547 23.024234 23.285953 23.990234 23.251953 z"></path>
                    </svg>
                </a>

                <a id="student-delete" href="{% url 'student_settings' student.pk %}">
                    <svg id="student-settings-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 30 30">
                        <path d="M 22.828125 3 C 22.316375 3 21.804562 3.1954375 21.414062 3.5859375 L 19 6 L 24 11 L 26.414062 8.5859375 C 27.195062 7.8049375 27.195062 6.5388125 26.414062 5.7578125 L 24.242188 3.5859375 C 23.851688 3.1954375 23.339875 3 22.828125 3 z M 17 8 L 5.2597656 19.740234 C 5.2597656 19.740234 6.1775313 19.658 6.5195312 20 C 6.8615312 20.342 6.58 22.58 7 23 C 7.42 23.42 9.6438906 23.124359 9.9628906 23.443359 C 10.281891 23.762359 10.259766 24.740234 10.259766 24.740234 L 22 13 L 17 8 z M 4 23 L 3.0566406 25.671875 A 1 1 0 0 0 3 26 A 1 1 0 0 0 4 27 A 1 1 0 0 0 4.328125 26.943359 A 1 1 0 0 0 4.3378906 26.939453 L 4.3632812 26.931641 A 1 1 0 0 0 4.3691406 26.927734 L 7 26 L 5.5 24.5 L 4 23 z"></path>
                    </svg>
                </a>
                   
            </div>

            <ul>
                <li><b>Name:</b> {{ student.first_name }} {{ student.last_name }} </li>
                <li><b>Class:</b> {{ student.student_class.class_name }} </li>
                <!--<li><b>Age:</b> {{ student.student_age }} </li>-->
                <li><b>Grade:</b> {{ student.student_class.class_grade }} </li>
                <li><b>Student ID:</b> {{ student.student_ID }} </li>
                <li><b>Total Photos:</b> {{ student.photo_set.all | length }} </li>
            </ul>

            <!--
            <form id="photo-upload-form" enctype="multipart/form-data" action="{% url 'view_student' student_id %}" method="post">
                {% csrf_token %}

                <label id="sv-form-label"><b>Upload Photos</b></label>
                {{ photo_form.photo }}

                <input id="sv-form-submit" type="submit" name="upload-photo" value="Upload">

            </form>
            -->
            
        </div>
    
        <div id="student-pictures-wrapper">

            {% for student in student.photo_set.all %}
                <div class="student-photo-wrapper">
                    <img class="student-photo" src="{% get_media_prefix %}{{ student.photo }}" loading="lazy" alt="student-photo">
                    <a href="{% url 'download_photo' student.pk %}"> Download </a>

                    <div class="modal">
        
                        <div class="close-button">&times;</div>
        
                        <img class="modal-image">
        
                    </div>
                </div>
            {% endfor %}
        
        <!-- DUMMY PHOTO CARDS FOR TESTING -->
            <div class="student-photo-wrapper">
                <div class="student-photo">
                    <img src="{% get_media_prefix %}photo-ids/default-photo-id.PNG" loading="lazy" alt="student-photo">
                    <a> Download </a>
                </div>
            </div>
            <div class="student-photo-wrapper">
                <div class="student-photo">
                    <img src="{% get_media_prefix %}photo-ids/default-photo-id.PNG" loading="lazy" alt="student-photo">
                    <a> Download </a>
                </div>
            </div>
            <div class="student-photo-wrapper">
                <div class="student-photo">
                    <img src="{% get_media_prefix %}photo-ids/default-photo-id.PNG" loading="lazy" alt="student-photo">
                    <a> Download </a>
                </div>
            </div>
            <div class="student-photo-wrapper">
                <div class="student-photo">
                    <img src="{% get_media_prefix %}photo-ids/default-photo-id.PNG" loading="lazy" alt="student-photo">
                    <a> Download </a>
                </div>
            </div>

        </div>

    </div>

    <script src="{% static 'photom/view_student.js' %}"></script>

{% endblock %}